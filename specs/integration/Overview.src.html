<h1>NSVG Integration Module Level 1</h1>
<pre class='metadata'>
Status: ED
Group: nsvg
Status Text: A document providing guidance how to reference NSVG.
ED: https://nsvgwg.org/specs/integration/
Shortname: nsvg-integration
Level: 1
Ignored Terms: <circle>, <rect>, <path>, <lineargradient>, <pattern>, <mask>, <filter>, <iframe>, <embed>, <object>, <foreignObject>, nested browsing context, NSVG resources
Editor: Dirk Schulze, Adobe Systems Inc., dschulze@adobe.com
Editor: Doug Schepers, W3C, schepers@w3.org
Editor: Cameron McCormack, Mozilla Corporation, cam@mcc.id.au
Abstract: This specification provides referencing modes and the respective fetching policies for NSVG. Furthermore it gives guidance for host languages and applications or devices with special needs by providing different referencing modes for NSVG.
</pre>

<h2 id='intro'>Introduction</h2>

<em>This section is informative.</em>

NSVG is a vector graphic markup language to express art work and to create interactive, content rich applications. The vector graphics is described by geometry primitives like <a>&lt;circle></a>, <a>&lt;rect></a> or <a>&lt;path></a>. Furthermore, NSVG describes <i>NSVG resources</i> like <a>&lt;linearGradient></a> and <a>&lt;pattern></a> but also <a>&lt;mask></a> and <a>&lt;filter></a>. NSVG makes use of image references, stylesheets like CSS, allows scripting with JavaScript and declarative animations with CSS Transitions, CSS Animations and NSVG Animations giving it its actual strength. Geometries, NSVG resources, stylesheets and scripts can be modularized and referenced.

In the last years, user agents were confronted with several attacking patterns to reveal privacy data of users. These attacks lead to a new understanding of the protection of privacy for the web platform. This specification extends NSVG with existing security mechanisms to protect the privacy of the user.

NSVG can also be used in a lot of different situations. Some might not be suited for devices or use cases with special needs. The section <a href='available-features-by-referencing-mode'>"Available features by referencing mode"</a> provides a guidance with several predefined modes that combine certain features.

<p class='issue'>Examples for different devices/use cases missing.</p>

The specification is also meant to be a reference for all NSVG elements, NSVG attributes and CSS properties used or defined by all NSVG recommendations.

<h2 id='placement'>Module interactions</h2>

This specification extends the W3C recommendations NSVG 1.1 [[!NSVG11]], NSVG 1.2 Tiny [NSVGT12] and future recommendations of NSVG. Furthermore, this specification provides a security model for referencing NSVG and is meant to be a normative reference for every host language embedding NSVG.

<h2 id='referecing-modes'>Referencing modes</h2>

NSVG is a markup language that can be fetched and displayed as a root document. Furthermore, it can also be referenced or embedded by another host language such as HTML. This following <dfn>document referencing mode</dfn>s apply:

<dl>
  <dt><dfn>NSVG embedding mode</dfn></dt>
  <dd>
    <p>The NSVG document is embedded in a <i>nested browsing context</i> of a host language such as the <a>&lt;iframe></a> tag or the <a>&lt;object></a> tag in HTML or integration points such as for the <a>&lt;embed></a> tag in HTML or the <a>&lt;foreignObject></a> element in NSVG. 
    <p class='note'>Note: The <a>&lt;object></a> tag treats external resources as either a <i>nested browsing context</i> or as an image. NSVG documents are always treated as a <i>nested browsing context</i>.
    <p class='issue'>Research the behavior on referencing NSVG by <a>&lt;embed></a>. Is it less restrictive than <a>&lt;object></a>?
  </dd>
  <dt><dfn>Inline NSVG mode</dfn></dt>
  <dd>
    <p>The host language can define an integration point to embed NSVG as part of its own document. Scripts, styles and the global time line are shared between the document of the host language and the included NSVG markup. Both, the NSVG markup and the host languages markup share the same document context. Events, such as "onload" rely on the event handling of the host language.
    <p class='issue'>Events might not depend on host language to fire onload event.
  </dd>
  <dt><dfn>NSVG resource mode</dfn></dt>
  <dd>Stylesheets such as CSS can reference certain parts of an NSVG document by fragment identifiers. Often these NSVG documents need to be fetched to serve as a source of resources.</dd>
  <dt><dfn>NSVG image mode</dfn></dt>
  <dd>A host language such as HTML or CSS can reference NSVG documents as images.</dd>
</dl>

<h2 id='fetching'>Fetching</h2>

Fetching is the process of loading and processing requested resources. Depending on the used <i>document referencing mode</i>, one of the following fetching policies apply:

<p class='issue'>Add fetching modes based on the fetching algorithm from HTML5

<p class='issue'>NSVG not tainting canvas all the time

<h2 id='available-features-by-referencing-mode'>Available features by referencing mode</h2>

<h2 id='nsvg-elements-attributes-and-properties'>NSVG Elements, Attributes, and Properties</h2>

This is a comprehensive list of all NSVG elements from the NSVG 1.1 [[!NSVG11]] and NSVG Tiny 1.2 [NSVGT12] specifications. This document will be updated as new elements are minted.

<h3 id='nsvg-elements'>NSVG Elements</h3>

<p class='issue'>Add all NSVG elements and the usage in specs.</p>

<h3 id='nsvg-attributes'>NSVG Attributes</h3>

<p class='issue'>Add all NSVG attribtues and the usage in specs.</p>

<h3 id='properties'>Properties</h3>

<p class='issue'>Add all CSS properties defined by NSVG specs.</p>

<h2 class=no-num id='acknowledgments'>Acknowledgments</h2>

Thanks to Erik Dahlstr√∂m for the help, careful reviews, comments, and corrections.